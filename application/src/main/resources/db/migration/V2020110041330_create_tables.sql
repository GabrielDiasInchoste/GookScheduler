CREATE TABLE TB_ADDRESS (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  NAME VARCHAR(255) NOT NULL,
  NUMBER INTEGER NOT NULL,
  DESCRIPTION VARCHAR(255) NOT NULL,
  CEP VARCHAR(255) NOT NULL,
  CREATE_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  LAST_MODIFIED_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  CONSTRAINT PK_ADDRESS PRIMARY KEY (ID)
);

CREATE SEQUENCE ADDRESS_ID_SEQ START WITH 1;

CREATE TABLE TB_CANCEL (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  DESCRIPTION VARCHAR(255) NOT NULL,
  CANCEL_REQUESTED_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  CANCEL_CONFIRMED_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  CONSTRAINT PK_TB_CANCEL PRIMARY KEY (ID)
);

CREATE SEQUENCE CANCEL_ID_SEQ START WITH 1;

CREATE TABLE TB_COURT (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  NAME VARCHAR(255) NOT NULL,
  TYPE VARCHAR(255) NOT NULL,
  DESCRIPTION VARCHAR(255) NOT NULL,
  CREATE_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  LAST_MODIFIED_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  LOCAL_ID BIGINT NOT NULL,
  CONSTRAINT PK_COURT PRIMARY KEY (ID)
);

ALTER TABLE TB_COURT ADD CONSTRAINT FK_COURT_ON_LOCAL FOREIGN KEY (LOCAL_ID) REFERENCES TB_LOCAL (ID);

CREATE SEQUENCE COURT_ID_SEQ START WITH 1;


CREATE TABLE TB_LOCAL (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  NAME VARCHAR(255) NOT NULL,
  ADDRESS_ID BIGINT NOT NULL,
  CREATE_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  LAST_MODIFIED_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  CONSTRAINT PK_LOCAL PRIMARY KEY (ID)
);

ALTER TABLE TB_LOCAL ADD CONSTRAINT FK_LOCAL_ON_ADDRESS FOREIGN KEY (ADDRESS_ID) REFERENCES TB_ADDRESS (ID);

CREATE SEQUENCE LOCAL_ID_SEQ START WITH 1;

CREATE TABLE TB_SCHEDULER (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  CUSTOMER_ID VARCHAR(255) NOT NULL,
  STATUS VARCHAR(255) NOT NULL,
  COURT_ID BIGINT NOT NULL,
  CANCEL_ID BIGINT,
  SCHEDULE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  CONFIRM_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  CREATE_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  LAST_MODIFIED_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  CONSTRAINT PK_SCHEDULER PRIMARY KEY (ID)
);

ALTER TABLE TB_SCHEDULER ADD CONSTRAINT FK_SCHEDULER_ON_CANCEL FOREIGN KEY (CANCEL_ID) REFERENCES TB_CANCEL (ID);

ALTER TABLE TB_SCHEDULER ADD CONSTRAINT FK_SCHEDULER_ON_COURT FOREIGN KEY (COURT_ID) REFERENCES TB_COURT (ID);

CREATE SEQUENCE SCHEDULER_ID_SEQ START WITH 1;
